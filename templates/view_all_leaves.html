{% extends "base.html" %}
    
{% block content %}
<h1>All Employees' Leave Data</h1>
<hr>
<div class="navbar">
    <a href="{{ url_for('view_all_leaves') }}" class="active">View All Employee Leave Balance</a>
    <a href="#">Pending Leave Requests</a>
    <a href="#">Overview</a>
</div>

<table border="1" class="leave-table">
    <tr>
        <th>Name</th>
        <th>Annual Leave (Allowed/Taken)</th>
        <th>Unpaid Leave (Allowed/Taken)</th>
        <th>Compassionate Leave (Allowed/Taken)</th>
        <th>Medical Leave (Allowed/Taken)</th>
    </tr>
    {% for employee in all_leaves %}
    <tr>
        <td>{{ employee['name'] }}</td>
        <td>{{ employee['leaves'].get('Annual Leave', {'allowed': 0, 'taken': 0})['allowed'] }}/{{ employee['leaves'].get('Annual Leave', {'allowed': 0, 'taken': 0})['taken'] }}</td>
        <td>{{ employee['leaves'].get('Unpaid Leave', {'allowed': 0, 'taken': 0})['allowed'] }}/{{ employee['leaves'].get('Unpaid Leave', {'allowed': 0, 'taken': 0})['taken'] }}</td>
        <td>{{ employee['leaves'].get('Compassionate Leave', {'allowed': 0, 'taken': 0})['allowed'] }}/{{ employee['leaves'].get('Compassionate Leave', {'allowed': 0, 'taken': 0})['taken'] }}</td>
        <td>{{ employee['leaves'].get('Medical Leave', {'allowed': 0, 'taken': 0})['allowed'] }}/{{ employee['leaves'].get('Medical Leave', {'allowed': 0, 'taken': 0})['taken'] }}</td>
    </tr>
    {% endfor %}
</table>

<div class="legend">
    <div class="color-box" style="background-color: green;"></div> Above 70% taken
    <div class="color-box" style="background-color: yellow;"></div> 40% - 70% taken
    <div class="color-box" style="background-color: red;"></div> Below 40% taken
</div>

<a href="{{ url_for('employee_list') }}">Back to Employee List</a>
{% endblock %}
